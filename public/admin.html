<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="BayUrl 管理后台 - 管理您的短链接">
    <title>管理后台 - BayUrl</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>⚙️</text></svg>">
</head>

<body>
    <div class="container">
        <!-- Login View -->
        <div id="adminLogin" class="card">
            <div class="logo-container">
                <div class="logo-wrapper">
                    <img src="logo.png" alt="BayUrl Logo" class="logo-img">
                </div>
                <h1 style="font-size: 28px; margin-top: 8px;">管理员登录</h1>
            </div>
            <p class="subtitle">请输入您的访问令牌</p>
            <form id="loginForm">
                <div class="form-group">
                    <input type="password" id="tokenInput" placeholder="🔑 Admin Token" required>
                </div>
                <button type="submit">🚀 进入后台</button>
            </form>
        </div>

        <!-- Dashboard View -->
        <div id="dashboard" class="hidden">
            <!-- Header Card -->
            <div class="card">
                <div class="admin-header">
                    <h2>
                        <span style="margin-right: 10px;">📊</span>
                        数据概览
                    </h2>
                    <button id="logoutBtn" class="btn-secondary">
                        <span style="margin-right: 6px;">🚪</span>
                        退出登录
                    </button>
                </div>

                <!-- Stats Grid -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>📈 今日访问</h3>
                        <div class="stat-value" id="todayVisits">0</div>
                    </div>
                    <div class="stat-card">
                        <h3>🔗 今日新增</h3>
                        <div class="stat-value" id="todayLinks">0</div>
                    </div>
                    <div class="stat-card">
                        <h3>📅 当月访问</h3>
                        <div class="stat-value" id="monthVisits">0</div>
                    </div>
                    <div class="stat-card">
                        <h3>📎 当月新增</h3>
                        <div class="stat-value" id="monthLinks">0</div>
                    </div>
                    <div class="stat-card">
                        <h3>🌐 总访问量</h3>
                        <div class="stat-value" id="totalVisits">0</div>
                    </div>
                    <div class="stat-card">
                        <h3>🔗 总链接数</h3>
                        <div class="stat-value" id="totalLinks">0</div>
                    </div>
                </div>

                <!-- Settings -->
                <div class="settings-panel">
                    <h3>⚙️ 系统设置</h3>
                    <form id="settingsForm" style="margin-top: 16px;">
                        <div style="display: flex; align-items: center; gap: 16px; flex-wrap: wrap;">
                            <label style="font-size: 14px; color: var(--text-secondary); font-weight: 500;">
                                每日创建限额
                            </label>
                            <input type="number" id="dailyLimitInput" min="0" step="100"
                                style="width: 140px; padding: 12px 16px;">
                            <button type="submit" style="width: auto; padding: 12px 24px;">
                                💾 保存
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- 访问记录卡片 -->
            <div class="card collapsible-card" style="margin-top: 24px;">
                <div class="collapsible-header" data-target="visitsContent">
                    <h2 style="margin: 0; display: flex; align-items: center;">
                        <span style="margin-right: 10px;">👀</span>
                        访问记录
                        <span class="collapse-icon">▼</span>
                    </h2>
                    <button id="refreshVisitsBtn" class="btn-secondary" style="padding: 10px 16px;"
                        onclick="event.stopPropagation()">
                        🔄 刷新
                    </button>
                </div>

                <div id="visitsContent" class="collapsible-content">
                    <div id="visitsList" class="visits-list">
                        <!-- 访问记录在这里渲染 -->
                    </div>

                    <!-- 访问记录分页 -->
                    <div id="visitsPagination"
                        style="display: flex; justify-content: center; align-items: center; gap: 16px; margin-top: 24px; padding-top: 20px; border-top: 1px solid var(--gray-200);">
                        <button id="visitsPrevBtn" class="btn-secondary" style="padding: 10px 20px;">
                            ← 上一页
                        </button>
                        <span id="visitsPageInfo"
                            style="font-size: 14px; color: var(--text-secondary); font-weight: 500;">
                            第 1 页
                        </span>
                        <button id="visitsNextBtn" class="btn-secondary" style="padding: 10px 20px;">
                            下一页 →
                        </button>
                    </div>
                </div>
            </div>

            <!-- Link List Card -->
            <div class="card collapsible-card" style="margin-top: 24px;">
                <div class="collapsible-header" data-target="linksContent">
                    <h2 style="margin: 0; display: flex; align-items: center;">
                        <span style="margin-right: 10px;">📋</span>
                        链接管理
                        <span class="collapse-icon">▼</span>
                    </h2>
                    <div style="display: flex; gap: 12px; align-items: center; flex-wrap: wrap;"
                        onclick="event.stopPropagation()">
                        <input type="text" id="searchInput" placeholder="🔍 搜索链接或备注..."
                            style="padding: 12px 20px; width: 220px; border-radius: 99px; font-size: 14px;">
                        <button id="searchBtn" class="btn-secondary" style="padding: 12px 20px;">
                            搜索
                        </button>
                        <button id="batchDeleteBtn" class="delete-btn"
                            style="display: none; padding: 12px 20px; border-radius: 99px;">
                            🗑️ 删除选中 (<span id="selectedCount">0</span>)
                        </button>
                    </div>
                </div>

                <div id="linksContent" class="collapsible-content">
                    <!-- Select All -->
                    <div id="selectAllContainer"
                        style="display: none; padding: 12px 0; border-bottom: 1px solid var(--gray-200); margin-bottom: 8px;">
                        <label
                            style="display: flex; align-items: center; gap: 10px; cursor: pointer; font-size: 14px; color: var(--text-secondary); font-weight: 500;">
                            <input type="checkbox" id="selectAllCheckbox">
                            ☑️ 全选当前页
                        </label>
                    </div>

                    <div id="linkList" class="link-list">
                        <!-- Links will be inserted here -->
                    </div>

                    <!-- Pagination -->
                    <div id="pagination"
                        style="display: flex; justify-content: center; align-items: center; gap: 16px; margin-top: 24px; padding-top: 20px; border-top: 1px solid var(--gray-200);">
                        <button id="prevPageBtn" class="btn-secondary" style="padding: 10px 20px;">
                            ← 上一页
                        </button>
                        <span id="pageInfo" style="font-size: 14px; color: var(--text-secondary); font-weight: 500;">
                            第 1 页
                        </span>
                        <button id="nextPageBtn" class="btn-secondary" style="padding: 10px 20px;">
                            下一页 →
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer>
            <p>© 2026 BayUrl · <a href="/">返回首页</a></p>
        </footer>
    </div>

    <script src="script.js"></script>
</body>

</html>